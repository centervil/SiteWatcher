---
title: "2025-03-09 Cline設定最適化と最適なLLMモデルの選択"
emoji: "⚙️"
type: "tech"
topics: ["VSCode", "Cline", "LLM"]
published: false
---

# Cline設定最適化と最適なLLMモデルの選択

## 導入（まえがき）

昨日はCline_Guide.mdとcline_auto_logging_prompt.mdの統合に取り組みました。今日は、その流れでClineを利用した開発の改善の一環として、Clineにおける設定の最適化と最適な無料利用可能なLLMモデルの選択について検討していきます。既にdeepseek-r1-zeroとdeepseek-r1を試しましたが、期待通りの結果が得られませんでした。

## 検討事項（議論）

Cline拡張機能で利用可能なLLMモデルには様々な選択肢があります。無料で利用できるモデルとしては、Google Gemini 2.0 FlashやDeepSeekのモデルがありますが、それぞれに長所と短所があります。

DeepSeekモデルについては、以下の問題点が確認されています：
- DeepSeek-r1はAPIエラーが頻発する問題がある
- DeepSeek-r1-zeroは開発テーマを勝手に決めるなど使用感が良くない
- 大規模プロジェクトではDeepSeek + Clineの組み合わせは推奨されていない
- 大量のコードコンテキストを持つプロジェクトではAPIリクエスト処理が著しく遅くなる可能性がある

一方、Anthropic Claude 3.5-Sonnetはコーディングに最適と推奨されていますが、有料です。コスト効率と性能のバランスを考慮した選択が必要です。

## 実行内容（実装）

Clineの設定最適化について、以下の対策を実施しました：

1. **Auto Approve機能の無効化**：DeepSeekを使用する場合、リソース消費を減らし、複数の同時リクエストによるラグのリスクを最小限に抑えるため、この機能を無効化しました。

2. **カスタム指示の設定**：VSCodeのCline拡張機能設定で「Custom Instructions」フィールドを使用して、コーディング標準、品質要件、エラー処理の設定などを指定しました。

3. **.clinerules ファイルの作成**：プロジェクトのルートディレクトリに.clinerules ファイルを作成し、プロジェクト固有のガイドラインを追加しました。これにより、Clineの動作をプロジェクトに最適化することができました。

```
# .cursorrules - Code rules and editor settings for SiteWatcher project

[General]
IndentStyle = Space
IndentSize = 2
TabWidth = 2
LineEnding = LF
Encoding = UTF-8
MaxLineLength = 120
```

## 所感（考察）

Clineの設定最適化とLLMモデルの選択は、開発効率に大きく影響することを実感しました。特に、DeepSeekモデルを試した際に感じた不満点（APIエラーの頻発や開発テーマを勝手に決められる問題）は、適切な設定と最適なモデル選択の重要性を示しています。

無料モデルには制限があり、完璧な選択肢はないようです。Google Gemini 2.0 Flashは無料で使えますが、レート制限に頻繁に達する可能性があります。一方、Claude 3.5-Sonnetは性能が良いものの、コストがかかります。

.clinerules ファイルの作成は特に効果的でした。プロジェクト固有の設定を一箇所で管理できるため、チーム全体で一貫した開発環境を維持しやすくなりました。

## 今後の課題（展望）

今後の課題としては、以下の点に取り組む必要があります：

1. 選択したLLMモデルの実際のパフォーマンスと使用感の継続的な評価
2. Clineのカスタム指示のさらなる最適化
3. 大規模プロジェクトでのClineの効率的な使用方法の検討
4. 会話ログの自動記録機能の改善

特に、無料と有料のLLMモデルのコストパフォーマンスを比較し、プロジェクトの規模や要件に応じた最適な選択を行うことが重要です。

## 結論（まとめ）

Cline拡張機能の設定最適化と無料利用可能なLLMモデルの選択について検討しました。無料モデルとしてはGoogle Gemini 2.0 Flashが利用可能ですが、レート制限の問題があります。DeepSeekモデルはコスト効率が良いものの、大規模プロジェクトには不向きです。

最適なパフォーマンスを得るためには、Auto Approve機能の無効化、カスタム指示の設定、.clinerules ファイルの使用などの設定最適化が重要であることがわかりました。今後も継続的に設定を見直し、開発効率の向上を図っていきたいと思います。 